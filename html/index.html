<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_998285_t3g6kb6awsc.css">
</head>
<body>
     <header>
        <div class="navWarp">
            <div class="typearea">
                <div class="location">
                    <img src="../img/citypoint.png" alt="">
                    <span >北京</span>
                    <span class="toggleCity">[切换城市]</span>
                </div>
                <nav>
                    <a href="javascript:;" class="active">首页</a>
                    <a href="javascript:;">关于我们</a>
                    <a href="javascript:;">服务商</a>
                    <a href="javascript:;">商家入驻</a>
                    <a href="javascript:;">商家登录</a>
                    <a href="javascript:;">到位APP</a>
                </nav>
            </div>
        </div>
        <div class="searchLine">
            <div class="typearea">
                <h1>
                    <a href="javascript:;">
                        <img  class="logo" src="../img/logo.png" alt="">
                    </a>
                </h1>
                <div class="search clearfix">
                    <i class="iconfont icon-sousuo"></i>
                    <input type="text" placeholder="输入关键词搜索商家、服务">
                    <button>搜服务</button>
                </div>
                <img src="../img/daowayApp.png" class="code" alt="">
            </div>
        </div>
     </header>

     <div id="bigWrap">
         <div class="wrap">

         </div>
         <div class="typearea">
            <div class="navList">
                <ul>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">

                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">

                    </li>
                    <li>
                        <a href="javascript:;">家庭保洁</a>
                        <img src="../img/right.png" alt="">
                    </li>
                </ul>
            </div>
            <div class="smallDot">
                <span class="active"></span>
                <span></span>
                <span></span>
            </div>
         </div>
     </div>

     <div class="content">
         <div class="typearea">
             <div id="item1"></div>
             <div id="item2"></div>
             <div id="item3"></div>
             <div id="item4"></div>
             <div id="item5"></div>
             <div id="item6"></div>
             <div id="item7"></div>
             <div id="item8"></div>
             <div id="item9"></div>
             <div id="item10"></div>
         </div>
     </div>
    <script type="text/javascript" src="../js/jquery.js"></script>
    <script type="text/javascript" src="../js/template.js"></script>
    <script type="text/javascript" src="../js/mock.js"></script>
    <script type="text/javascript" src="../js/test.js"></script>
    <script type="text/html" id="test">
      <h2 class="title">{{serviceIndex}}</h2>
      <div class="nav">
          <ul class="navList">
              {{each serviceType as value i}}
              <li>
                  <a href="javascript:;">{{value}}</a>
              </li>
              {{/each}}
          </ul>
          <span class="more">更多服务></span>
      </div>

      <div class="item">
          <ul class="itemList">
              {{each shopList as value i}}
              <a href="javascript:;">
                  <li>
                      <img src="{{value.imgUrl}}" class="imgUrl" alt="">
                      <p class="serviceName">{{value.serviceName}}</p>
                      <p class="description">{{value.description}}</p>
                      <div class="priceAndDetail clearfix">
                          <div class="price">{{value.price}}</div>
                          <span class="nuit">元/小时</span>
                          <div class="detail">查看详情</div>
                      </div>
                  </li>
              </a>
              {{/each}}
          </ul>
      </div>

    </script>
    <script type="text/javascript">
        $(function () {

            $.get('/getDate',function (itemList) {
                const arr = JSON.parse(itemList)
                for (var i = 1; i <= arr.length; i++) {
                    $('#item'+ i).append(template('test',arr[i-1]))
                }
            })

            category()
            function category() {
                $('#bigWrap .navList>ul>li').mouseenter(function () {
                    $(this).children()[1].src = '../img/icon1.png'
                    $(this).children()[1].style.right = -1 + 'px'
                })
                    .mouseleave(function () {
                        $(this).children()[1].src = '../img/right.png'
                        $(this).children()[1].style.right= 30 + 'px'
                    })
            }

            toggleBigImg()         //形参默认值
            function toggleBigImg (newNum=0) {
                let num  =  newNum
                const intervalID = setInterval( () => {
                    if (num === 3 ) num = 0
                    num++
                    DotClass(num)
                    $('#bigWrap').css("background-image",`url(../img/banner${num}.jpg)`)
                },3000)

                $('#bigWrap').mouseenter(function () {
                    clearInterval(intervalID)
                })
                    .mouseleave(function () {
                        newNum = num  //继续之前的轮播
                        toggleBigImg(newNum)
                    })
            }

            //小圆点点击
            smallDot()
            function smallDot() {
                $('#bigWrap .smallDot>span').click(function () {
                    const index = $(this).index()+1
                    DotClass(index)
                    $('#bigWrap').css("background-image",`url(../img/banner${index}.jpg)`)
                })
            }

            //小圆点类名切换
            function DotClass(index) {
                const spans = $('#bigWrap .smallDot>span')
                for (var i = 0; i < spans.length; i++) {
                    $(spans[i]).removeClass()
                }
                $(spans[index-1]).addClass('active')
            }


        })

    </script>
</body>
</html>
